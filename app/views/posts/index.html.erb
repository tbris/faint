<%= render "form", post: Post.new %>

<br>
<br>

<% @posts.order(created_at: :desc).each do |post| %>
  <div class="thread">
    <%= render "post", post: post, mainClass: "post", show: true %>
    <% if post.replies.size >= 5 %>
      <div class="expand-thread">
        <%= pluralize post.replies.size - 5, "reply" %> omitted.
        <%= link_to "Click here", post %> to view
      </div>
    <% end %>
    <% post.replies.last(5).each do |reply| %>
      <%= render "reply", reply: reply %>
    <% end %>
  </div>
  <hr>
<% end %>
